# Leetcode ：LCR 170.交易逆序对的总数

## 一、题目链接
# [LCR 170.交易逆序对的总数](https://leetcode.cn/problems/shu-zu-zhong-de-ni-xu-dui-lcof/?envType=problem-list-v2&envId=GzFbGrmM)

## 二、题目描述
寻找数组当中的所有逆序对

## 三、解题思路与代码实现
### 1. 核心思路
- 归并思想：使用归并的分治思想，先将数组分组，在“ 治 ” 的过程即排序的过程的同时计算逆序对的个数，即如果右边的元素小于左边的元素，那也同时小于左边组当前元素及后面的元素，因为治的过程中传回来的都是排序好的数组

### 2. 代码实现
#### 哈希表+小根堆：
```C++
class Solution {
private:
    int mergeSort(int l, int r, vector<int>& record, vector<int> tmp) {
        if( l >= r ) return 0;
        int m = (l + r) / 2;
        int res = mergeSort(l, m, record, tmp) + mergeSort(m + 1, r, record, tmp);
        int i = l, j = m + 1;
        for(int k = l; k <= r; k++) 
            tmp[k]= record[k];
        for(int k = l; k <= r; k++) {
            if( i == m + 1) 
                record[k] = tmp[j++];
            else if ( j == r + 1 || tmp[i] <= tmp[j] ) 
                record[k] = tmp[i++];
            else {
                record[k] = tmp[j++];
                res += m - i + 1;
            }
        }
        return res;
    }
public:
    int reversePairs(vector<int>& record) {
        vector<int> tmp(record.size());
        return mergeSort(0, record.size() - 1, record, tmp);
    }
};
```
- 时间复杂度：O(N logN)
- 空间复杂度：O(N)